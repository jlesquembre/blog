<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Web components and eleventy | Lafuente</title><meta name="Description" content="I am writing about my experiences as a software developer."><link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Lafuente"><script type="module" src="/js-modules/model-viewer.min.js"></script><style>*,::after,::before{box-sizing:border-box}ol[class],ul[class]{padding:0}blockquote,body,dd,dl,figure,h1,h2,h3,h4,ol[class],p,ul[class]{margin:0}html{scroll-behavior:smooth}body{min-height:100vh;text-rendering:optimizeSpeed;line-height:1.5}ol[class],ul[class]{list-style:none}a:not([class]){text-decoration-skip-ink:auto}img,picture{max-width:100%;display:block}article>*+*{margin-top:1em}button,input,select,textarea{font:inherit}img:not([alt]){filter:blur(10px)}@media(prefers-reduced-motion:reduce){*{animation-duration:NaNs!important;animation-iteration-count:1!important;transition-duration:NaNs!important;scroll-behavior:auto!important}}:root{--bg:#fafafa;--fg:#6c7680;--ui:#959da6;--text:#000000;--tag:#399ee6;--link:#399ee6;--side-bg:#1f2430;--side-fg:#cbccc6;--side-ui:#707a8c;--bg-m:#1f2430}*{box-sizing:border-box}:root{font-size:clamp(1rem,1.5vw,1.25rem)}.date-side,.date-tags-container,.tags-side{font-size:.8rem}body,html{padding:0;margin:0;font-family:system-ui,sans-serif;background-color:var(--bg)}html{height:100%}body{display:grid;grid-template-rows:1fr auto;grid-template-columns:30% 1fr 2.5rem;grid-column-gap:1rem;grid-row-gap:0}header{grid-column:1;grid-row:1/2}main{grid-column:2;grid-row:1/3;padding:1rem;overflow-x:auto}footer{grid-column:1;grid-row:2/3;position:sticky;bottom:0;display:flex;justify-content:center}.side{background-color:var(--side-bg);color:var(--side-fg)}a,a:hover,a:visited{text-decoration:none;color:inherit}main.blog p{margin:1.5em 0}hr,main.blog li,main.blog p{max-width:80ch}main.blog a:not(.tag):not(.direct-link),main.blog a:not(.tag):not(.direct-link):visited{text-decoration:underline var(--link)}main.blog a:not(.tag):not(.direct-link):hover{color:var(--link);text-decoration:underline var(--link)}.title{padding:.5em 1em 0;display:inline-block;margin:0 0 1em 1em;background-color:var(--bg);color:var(--text)}.nav-item{padding:clamp(.25rem,1.5vw,1.25rem)}.nav-item:hover{background-color:var(--ui);color:var(--text)}.nav-item-active,.nav-item-active:hover{font-weight:700;background-color:var(--bg);color:var(--text)}time{color:var(--fg)}.postlist-date{display:block}.postlist-item{margin:1.5em 0}.year-header{display:flex;color:var(--fg);border-bottom:1px dotted var(--fg)}.year-header>span{margin-left:auto}.year-header+.postlist-item{margin-top:0}.tag>span:first-child{color:var(--tag);padding:0 4px;border:1px solid rgba(0,0,0,.08)}.tag>span::before{content:""}.tag:hover>span:first-child{background-color:rgba(0,0,0,.08)}.tags-list{display:flex;flex-direction:column}.tags-list a{width:max-content}.tags-side span:first-child{border:none}.tags-side .tag:hover>span{background-color:var(--bg)}.direct-link{font-family:sans-serif;text-decoration:none;font-style:normal;margin-left:.1em}a[href].direct-link,a[href].direct-link:visited{color:transparent}:hover>a[href].direct-link,:hover>a[href].direct-link:visited,a[href].direct-link:focus,a[href].direct-link:focus:visited{color:#aaa}.sticky{position:sticky;top:1em}.summary-container{padding-top:30vh;display:grid;grid-template-columns:auto 1fr}.summary{padding:0 2em;margin:0 auto}.section-header{writing-mode:vertical-lr;text-orientation:upright;text-transform:capitalize}.social{display:flex;align-self:center;line-height:1em}.social svg{fill:var(--side-fg);width:2.5em}.icon-github svg:hover{fill:#000}.icon-twitter svg:hover{fill:#00c9ff}.icon-feed svg:hover{fill:#ff9132}a.social-icon{text-decoration:none;margin:0 .5em}#home{margin-left:auto;background-color:var(--bg);color:var(--fg);padding:.5em;text-decoration:none;display:none}#all-pages{display:block;background-color:#fff;position:fixed;padding:.25em;color:red;right:0}hr{margin:1em .5em}thead tr{background-color:var(--ui)}tbody tr:nth-child(2n){background-color:#dbdbdb}td,th{padding:0 1em}td[align=right],th[align=right]{text-align:right}table{border:1px solid hsla(0,0%,0%,.12);border-spacing:2px;margin:0;padding:0;margin-bottom:.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse}@media (max-width:850px){body{grid-template-rows:auto 1fr auto;grid-template-columns:1fr}header{grid-column:1;grid-row:1;padding-bottom:.5rem}main{grid-column:1;grid-row:2;padding:1rem}footer{grid-column:1;grid-row:3;position:initial;bottom:initial;display:flex;justify-content:center}.summary-container{display:none}}</style><link rel="stylesheet" href="/css/prism.css"></head><body><header class="side"><a href="/"><h1 class="title">Lafuente</h1></a><div class="sticky"><div class="social"><a class="social-icon icon-github" href="https://github.com/jlesquembre" title="@jlesquembre on GitHub" aria-label="jlesquembre on GitHub"><svg viewBox="0 0 32 32"><path d="M16 0C7.163 0 0 7.163 0 16s7.163 16 16 16 16-7.163 16-16S24.837 0 16 0zm9.502 25.502a13.4 13.4 0 01-5.51 3.334v-2.398c0-1.26-.432-2.188-1.297-2.781.542-.052 1.039-.125 1.492-.219s.932-.229 1.438-.406.958-.388 1.359-.633.786-.563 1.156-.953.68-.833.93-1.328.448-1.089.594-1.781.219-1.456.219-2.289c0-1.615-.526-2.99-1.578-4.125.479-1.25.427-2.609-.156-4.078l-.391-.047c-.271-.031-.758.083-1.461.344s-1.492.688-2.367 1.281a14.367 14.367 0 00-3.859-.516c-1.344 0-2.625.172-3.844.516a13.39 13.39 0 00-1.57-.93c-.495-.245-.891-.411-1.188-.5s-.573-.143-.828-.164-.419-.026-.492-.016-.125.021-.156.031c-.583 1.479-.635 2.839-.156 4.078-1.052 1.135-1.578 2.51-1.578 4.125 0 .833.073 1.596.219 2.289s.344 1.286.594 1.781.56.938.93 1.328.755.708 1.156.953.854.456 1.359.633.984.313 1.438.406.951.167 1.492.219c-.854.583-1.281 1.51-1.281 2.781v2.445A13.4 13.4 0 016.5 25.501 13.4 13.4 0 012.563 16a13.4 13.4 0 013.936-9.502 13.4 13.4 0 014.272-2.881c1.654-.7 3.414-1.054 5.229-1.054s3.575.355 5.23 1.055a13.4 13.4 0 014.272 2.881A13.4 13.4 0 0129.438 16c0 1.815-.355 3.575-1.055 5.23a13.41 13.41 0 01-2.881 4.272z"/></svg> </a><a class="social-icon icon-twitter" href="https://twitter.com/jlesquembre" title="@jlesquembre on Twitter" aria-label="jlesquembre on Twitter"><svg viewBox="0 0 32 32" fill="#00c9ff"><path d="M32 6.076a13.14 13.14 0 01-3.771 1.034 6.592 6.592 0 002.887-3.632 13.151 13.151 0 01-4.169 1.593 6.557 6.557 0 00-4.792-2.073 6.565 6.565 0 00-6.565 6.565c0 .515.058 1.016.17 1.496a18.64 18.64 0 01-13.532-6.86A6.536 6.536 0 001.339 7.5a6.563 6.563 0 002.921 5.465 6.54 6.54 0 01-2.974-.821l-.001.083a6.57 6.57 0 005.266 6.438 6.578 6.578 0 01-2.965.112 6.572 6.572 0 006.133 4.559 13.172 13.172 0 01-8.154 2.81c-.53 0-1.052-.031-1.566-.092a18.579 18.579 0 0010.064 2.95c12.076 0 18.679-10.004 18.679-18.68 0-.285-.006-.568-.019-.849A13.354 13.354 0 0032 6.076z"/></svg> </a><a class="social-icon icon-feed" href="/feed/feed.xml" title="José Luis Lafuente's RSS Feed" aria-label="José Luis Lafuente's RSS Feed"><svg viewBox="0 0 32 32" fill="#ff9132"><path d="M4.259 23.467A4.265 4.265 0 000 27.719a4.25 4.25 0 004.259 4.244 4.25 4.25 0 004.265-4.244c.001-2.336-1.906-4.252-4.265-4.252zM.005 10.873v6.133c3.993 0 7.749 1.562 10.577 4.391A14.897 14.897 0 0114.966 32h6.16C21.125 20.349 11.648 10.873.005 10.873zM.012 0v6.136C14.255 6.136 25.848 17.74 25.848 32H32C32 14.36 17.648 0 .012 0z"/></svg> </a><a href="/" id="home">Home</a></div><div class="summary-container"><h1 class="section-header">blog</h1><div class="summary"><div class="date-side">11 Aug 2020</div><h2>Web components and eleventy</h2><div class="tags-list tags-side"><a href="/tags/11ty" class="tag"><span>11ty</span> </a><a href="/tags/webcomponents" class="tag"><span>webcomponents</span></a></div></div></div></div></header><main class="blog"><div class="date-tags-container"><time datetime="2020-08-11">11 Aug 2020</time> · <a href="/tags/11ty" class="tag"><span>11ty</span> </a><a href="/tags/webcomponents" class="tag"><span>webcomponents</span></a></div><h1>Web components and eleventy</h1><p>If you want to have some dynamic content in your <a href="https://www.11ty.dev/">eleventy</a> static website, a good option is to use Web Components, they play very well together.</p><p>I'm going to explain how I added a web component to my blog, in this example I'll use <a href="https://modelviewer.dev/">model-viewer</a> component. This is the final result:</p><p><model-viewer src="/models/Astronaut.glb" style="height: 50vh" alt="A 3D model of an astronaut" auto-rotate camera-controls></model-viewer></p><blockquote><p><a href="https://poly.google.com/view/dLHpzNdygsg">Astronaut</a> by <a href="https://poly.google.com/user/4aEd8rQgKu2">Poly</a>, licensed under <a href="https://creativecommons.org/licenses/by/2.0/">CC-BY</a>.</p></blockquote><p>First, make sure that you set the <code>html</code> option for <em>markdownIt</em> to <code>true</code> in your <a href="https://www.11ty.dev/">eleventy</a> config file (usually <code>.eleventy.js</code>):</p><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>    html<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">setLibrary</span><span class="token punctuation">(</span><span class="token string">"md"</span><span class="token punctuation">,</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>You also need to tell <a href="https://www.11ty.dev/">eleventy</a> to copy the web components to your output directory. If you installed <a href="https://modelviewer.dev/">model-viewer</a> with npm, you can copy it adding this to your <code>.eleventy.js</code> config file:</p><pre class="language-js"><code class="language-js">eleventyConfig<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token string">"node_modules/@google/model-viewer/dist/model-viewer.min.js"</span><span class="token operator">:</span><br>    <span class="token string">"js-modules/model-viewer.min.js"</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>But you also need to import the web components in your web pages. To do that, I'm taking advantage of <a href="https://www.11ty.dev/">eleventy</a>'s <a href="https://www.11ty.dev/docs/data-frontmatter/">Front Matter Data</a> and the <a href="https://www.11ty.dev/docs/data-cascade/">Data Cascade</a>. In the <a href="https://www.11ty.dev/docs/data-frontmatter/">front matter</a> I define the components I want to use, that way I can load different components per page:</p><pre><code>---
title: Web components and eleventy
tags:
  - 11ty
  - webcomponents
modules:
  - &quot;model-viewer.min.js&quot;
---
</code></pre><p>The <code>modules</code> property (you can use another name) is a list with all the files I want to load in that page. You need to process that property when the template is rendered. I use <a href="https://www.11ty.dev/docs/languages/javascript/">JavaScript</a> for my templates, plus <a href="https://github.com/popeindustries/lit-html-server">lit-html-server</a>, but you should be able to adapted the next snippet to any of the <a href="https://www.11ty.dev/docs/languages/">Template Languages</a> supported by <a href="https://www.11ty.dev/">eleventy</a>:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> renderToString <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@popeindustries/lit-html-server"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">BaseTemplate</span> <span class="token punctuation">{</span><br>  <span class="token keyword">async</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">renderToString</span><span class="token punctuation">(</span><br>      html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><br>          <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span><br>            html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;script type="module" src="/js-modules/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">">&lt;/script></span><span class="token template-punctuation string">`</span></span><br>        <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      </span><span class="token template-punctuation string">`</span></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>You can see the real file here: <a href="https://github.com/jlesquembre/blog/blob/d1cbf61d5d1f37baaa686c063190b637efb95c6c/_includes/layouts/base.11ty.js">blog/base.11ty.js</a></p><p>And now you can just write the html directly on your markdown files:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>model-viewer</span><br>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/models/Astronaut.glb<span class="token punctuation">"</span></span><br>  <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>A 3D model of an astronaut<span class="token punctuation">"</span></span><br>  <span class="token attr-name">auto-rotate</span><br>  <span class="token attr-name">camera-controls</span><br><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>model-viewer</span><span class="token punctuation">></span></span></code></pre><p>This makes pretty easy to embedded custom components in your markdown documents, making it similar to writing <a href="https://mdxjs.com/">MDX</a>.</p><p><a href="/">← Home</a></p></main><footer class="side"><a href="/about"><div class="nav-item">About</div></a><a href="/tags"><div class="nav-item">Categories</div></a><a href="/posts"><div class="nav-item">Archives</div></a></footer></body></html>